{"version":3,"sources":["../../../src/tasks/Publish/prepare-package.js"],"names":["pkg","pkgPath","npmClient","tarballName","pkgTarballFilename","join","pkgTempDir","force","preparePackage"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;+BAEe,WAA8BA,GAA9B,EAAmCC,OAAnC,EAA4C;AACzD,UAAMC,YAAY,MAAM,6BAAxB;AACA,UAAMC,cAAc,MAAM,8BAAeH,GAAf,CAA1B;AACA,UAAMI,qBAAqB,eAAKC,IAAL,CAAUJ,OAAV,EAAmBE,WAAnB,CAA3B;AACA,UAAMG,aAAa,MAAM,0BAAWN,GAAX,CAAzB;AACA,UAAM,6BAAe,GAAEE,SAAU,OAA3B,EAAmCD,OAAnC,CAAN;AACA,UAAM,mBAAK,GAAEK,UAAW,KAAlB,EAAwB,EAAEC,OAAO,IAAT,EAAxB,CAAN;AACA,UAAM,uBAAQD,UAAR,CAAN;AACA,UAAM,8BAAeF,kBAAf,EAAmCE,UAAnC,CAAN;AACA,UAAM,mBAAIF,kBAAJ,CAAN;AACD,G;;WAV6BI,c;;;;SAAAA,c","file":"prepare-package.js","sourcesContent":["import path from 'path';\nimport del from 'del';\nimport makeDir from 'make-dir';\nimport execLikeShell from './exec-like-shell';\nimport extractTarball from './extract-tarball';\nimport getNpmClient from './get-npm-client';\nimport getTarballName from './get-tarball-name';\nimport getTempDir from './get-temp-dir';\n\nexport default async function preparePackage(pkg, pkgPath) {\n  const npmClient = await getNpmClient();\n  const tarballName = await getTarballName(pkg);\n  const pkgTarballFilename = path.join(pkgPath, tarballName);\n  const pkgTempDir = await getTempDir(pkg);\n  await execLikeShell(`${npmClient} pack`, pkgPath);\n  await del(`${pkgTempDir}/**`, { force: true });\n  await makeDir(pkgTempDir);\n  await extractTarball(pkgTarballFilename, pkgTempDir);\n  await del(pkgTarballFilename);\n}\n"]}