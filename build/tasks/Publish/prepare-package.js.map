{"version":3,"file":"prepare-package.js","names":["preparePackage","pkg","pkgPath","npmClient","getNpmClient","tarballName","getTarballName","pkgTarballFilename","path","join","pkgTempDir","getTempDir","execLikeShell","del","force","makeDir","extractTarball"],"sources":["../../../src/tasks/Publish/prepare-package.js"],"sourcesContent":["import path from 'path';\nimport del from 'del';\nimport makeDir from 'make-dir';\nimport execLikeShell from './exec-like-shell';\nimport extractTarball from './extract-tarball';\nimport getNpmClient from './get-npm-client';\nimport getTarballName from './get-tarball-name';\nimport getTempDir from './get-temp-dir';\n\nexport default async function preparePackage(pkg, pkgPath) {\n  const npmClient = await getNpmClient();\n  const tarballName = await getTarballName(pkg);\n  const pkgTarballFilename = path.join(pkgPath, tarballName);\n  const pkgTempDir = await getTempDir(pkg);\n  await execLikeShell(`${npmClient} pack`, pkgPath);\n  await del(`${pkgTempDir}/**`, { force: true });\n  await makeDir(pkgTempDir);\n  await extractTarball(pkgTarballFilename, pkgTempDir);\n  await del(pkgTarballFilename);\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,eAAeA,cAAf,CAA8BC,GAA9B,EAAmCC,OAAnC,EAA4C;EACzD,MAAMC,SAAS,GAAG,MAAM,IAAAC,qBAAA,GAAxB;EACA,MAAMC,WAAW,GAAG,MAAM,IAAAC,uBAAA,EAAeL,GAAf,CAA1B;;EACA,MAAMM,kBAAkB,GAAGC,aAAA,CAAKC,IAAL,CAAUP,OAAV,EAAmBG,WAAnB,CAA3B;;EACA,MAAMK,UAAU,GAAG,MAAM,IAAAC,mBAAA,EAAWV,GAAX,CAAzB;EACA,MAAM,IAAAW,sBAAA,EAAe,GAAET,SAAU,OAA3B,EAAmCD,OAAnC,CAAN;EACA,MAAM,IAAAW,YAAA,EAAK,GAAEH,UAAW,KAAlB,EAAwB;IAAEI,KAAK,EAAE;EAAT,CAAxB,CAAN;EACA,MAAM,IAAAC,gBAAA,EAAQL,UAAR,CAAN;EACA,MAAM,IAAAM,uBAAA,EAAeT,kBAAf,EAAmCG,UAAnC,CAAN;EACA,MAAM,IAAAG,YAAA,EAAIN,kBAAJ,CAAN;AACD"}