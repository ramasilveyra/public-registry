{"version":3,"sources":["../../../src/tasks/Publish/prepare-package.js"],"names":["preparePackage","pkg","pkgPath","npmClient","tarballName","pkgTarballFilename","path","join","pkgTempDir","force"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEe,eAAeA,cAAf,CAA8BC,GAA9B,EAAmCC,OAAnC,EAA4C;AACzD,QAAMC,SAAS,GAAG,MAAM,4BAAxB;AACA,QAAMC,WAAW,GAAG,MAAM,6BAAeH,GAAf,CAA1B;;AACA,QAAMI,kBAAkB,GAAGC,cAAKC,IAAL,CAAUL,OAAV,EAAmBE,WAAnB,CAA3B;;AACA,QAAMI,UAAU,GAAG,MAAM,yBAAWP,GAAX,CAAzB;AACA,QAAM,4BAAe,GAAEE,SAAU,OAA3B,EAAmCD,OAAnC,CAAN;AACA,QAAM,kBAAK,GAAEM,UAAW,KAAlB,EAAwB;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAxB,CAAN;AACA,QAAM,sBAAQD,UAAR,CAAN;AACA,QAAM,6BAAeH,kBAAf,EAAmCG,UAAnC,CAAN;AACA,QAAM,kBAAIH,kBAAJ,CAAN;AACD","sourcesContent":["import path from 'path';\nimport del from 'del';\nimport makeDir from 'make-dir';\nimport execLikeShell from './exec-like-shell';\nimport extractTarball from './extract-tarball';\nimport getNpmClient from './get-npm-client';\nimport getTarballName from './get-tarball-name';\nimport getTempDir from './get-temp-dir';\n\nexport default async function preparePackage(pkg, pkgPath) {\n  const npmClient = await getNpmClient();\n  const tarballName = await getTarballName(pkg);\n  const pkgTarballFilename = path.join(pkgPath, tarballName);\n  const pkgTempDir = await getTempDir(pkg);\n  await execLikeShell(`${npmClient} pack`, pkgPath);\n  await del(`${pkgTempDir}/**`, { force: true });\n  await makeDir(pkgTempDir);\n  await extractTarball(pkgTarballFilename, pkgTempDir);\n  await del(pkgTarballFilename);\n}\n"],"file":"prepare-package.js"}